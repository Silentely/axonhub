package gql

// This file will be automatically regenerated based on the schema, any resolver
// implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen

import (
	"context"

	"github.com/looplj/axonhub/internal/scopes"
)

// AllScopes returns all available scopes with descriptions.
func (r *queryResolver) AllScopes(ctx context.Context, level *string) ([]*ScopeInfo, error) {
	var scopeLevel *scopes.ScopeLevel
	if level != nil {
		sl := scopes.ScopeLevel(*level)
		scopeLevel = &sl
	}

	allScopes := scopes.AllScopes(scopeLevel)

	result := make([]*ScopeInfo, len(allScopes))
	for i, scope := range allScopes {
		levels := make([]string, len(scope.Levels))
		for j, l := range scope.Levels {
			levels[j] = string(l)
		}

		result[i] = &ScopeInfo{
			Scope:       string(scope.Slug),
			Description: scope.Description,
			Levels:      levels,
		}
	}

	return result, nil
}
